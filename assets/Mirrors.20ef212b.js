var G=Object.defineProperty;var b=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var z=(u,s,a)=>s in u?G(u,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[s]=a,S=(u,s)=>{for(var a in s||(s={}))H.call(s,a)&&z(u,a,s[a]);if(b)for(var a of b(s))R.call(s,a)&&z(u,a,s[a]);return u};import{ap as q,T,e as j,f as B,aq as J,_ as K,J as C,G as L,V as P,K as W,o as I,k as Y,h as y,ar as A,a as i,N as F,as as Q,W as X,Y as Z,l as V,at as ee,au as te,av as ae,F as $,aw as ne,g as se,aa as re,w as oe,j as ie}from"./vendor.000df4d1.js";import{S as E,u as ue}from"./index.73684516.js";var O={exports:{}};(function(u,s){(function(a,l){u.exports=l()})(q,function(){return function(a,l,m){a=a||{};var c=l.prototype,t={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function d(n,f,e,r){return c.fromToBase(n,f,e,r)}m.en.relativeTime=t,c.fromToBase=function(n,f,e,r,h){for(var k,_,v,w=e.$locale().relativeTime||t,N=a.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],D=N.length,g=0;g<D;g+=1){var p=N[g];p.d&&(k=r?m(n).diff(e,p.d,!0):e.diff(n,p.d,!0));var x=(a.rounding||Math.round)(Math.abs(k));if(v=k>0,x<=p.r||!p.r){x<=1&&g>0&&(p=N[g-1]);var M=w[p.l];h&&(x=h(""+x)),_=typeof M=="string"?M.replace("%d",x):M(x,f,p.l,v);break}}if(f)return _;var U=v?w.future:w.past;return typeof U=="function"?U(_):U.replace("%s",_)},c.to=function(n,f){return d(n,f,this,!0)},c.from=function(n,f){return d(n,f,this)};var o=function(n){return n.$u?m.utc():m()};c.toNow=function(n){return this.to(o(this),n)},c.fromNow=function(n){return this.from(o(this),n)}}})})(O);var le=O.exports;T.extend(le);async function ce(){const u=await j.get(E+"tunasync.json"),s=await j.get(E+"addition.json"),l=u.data.map(t=>({name:t.name,status:t.status,path:"/"+t.name,lastUpdate:t.last_update_ts>0?T.unix(t.last_update_ts).fromNow():"-",nextUpdate:t.next_schedule_ts>0?T.unix(t.next_schedule_ts).fromNow():"-",size:t.size=="unknown"?"-":t.size})),m=s.data,c=[];for(const t of m){const d=l.findIndex(n=>n.name==t.name);if(d!=-1){l[d]=S(S({},l[d]),t);continue}const o=l.find(n=>t.inherit==n.name);c.push({name:t.name,status:t.status||(o==null?void 0:o.status)||"unknown",path:t.path,route:t.route,lastUpdate:t.lastUpdate||(o==null?void 0:o.lastUpdate)||"-",nextUpdate:t.nextUpdate||(o==null?void 0:o.nextUpdate)||"-",size:t.size||"-"})}return[...l,...c]}var de=B({setup(u){const s=J(),a=K(),l=ue(),m=C([]);function c({data:e}){const r=l.state.docItems.find(h=>h.name==e.name);return i($,null,[i(V,{text:!0,onClick:()=>{e.route?s.push(e.route):window.location.href=e.path||"/"+e.name}},{default:()=>[e.name]}),ee(i(V,{text:!0,onClick:()=>s.push("/help/"+(r==null?void 0:r.route)||"")},{default:()=>[i(F,null,{default:()=>[i(ae,null,null)]})]}),[[te,r!=null]])])}function t({data:e}){let r="info";switch(e.status){case"cache":case"proxy":case"success":r="success";break;case"failed":r="error";break;case"syncing":r="info";break}return i(ne,{type:r},{default:()=>[e.status]})}const d=C(""),o=L(()=>l.state.isMobile?[]:[{title:"Size",key:"size",align:"center"},{title:"Last Update",key:"lastUpdate",align:"center"},{title:"Next Update",key:"nextUpdate",align:"center"}]),n=P([{title:"Mirror Name",key:"name",align:"left",render:e=>i(c,{data:e},null),filter:"default",filterOptionValue:d,renderFilterIcon:()=>i(F,null,{default:()=>[i(Q,null,null)]}),renderFilterMenu:()=>i(X,{style:"padding: 12px",vertical:!0},{default:()=>[i(Z,{placeholder:"Search mirrors...",value:d.value,"onUpdate:value":e=>d.value=e},null)]})},{title:"Status",key:"status",align:"center",render:e=>i(t,{data:e},null)}]),f={pageSlot:7,pageSize:20};return W(()=>{ce().then(e=>m.value=e.sort((r,h)=>r.name.localeCompare(h.name)),e=>a.error(e.message))}),(e,r)=>(I(),Y(y(A),{size:"small",columns:y(n).concat(y(o)),data:m.value,pagination:f},null,8,["columns","data"]))}});const fe=ie("Mirrors"),xe=B({setup(u){return(s,a)=>(I(),se($,null,[i(y(re),{prefix:"bar"},{default:oe(()=>[fe]),_:1}),i(de)],64))}});export{xe as default};
