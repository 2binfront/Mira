var C=Object.defineProperty;var f=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var h=(o,s,a)=>s in o?C(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a,m=(o,s)=>{for(var a in s||(s={}))M.call(s,a)&&h(o,a,s[a]);if(f)for(var a of f(s))B.call(s,a)&&h(o,a,s[a]);return o};import{f as _,aq as F,$ as I,O as x,J as j,W as O,P as T,o as g,n as E,p as d,ar as P,a as n,N as k,as as V,X as q,Z as D,v as N,at as H,au as R,av as $,F as U,aw as J,q as L,ab as W,w as X,s as Z}from"./vendor.e94554ee.js";import{g as w,t as y,S,u as A}from"./index.3c0c23cc.js";async function G(){const[o,s]=await Promise.all([w(S+"tunasync.json"),w(S+"addition.json")]),a=o.map(e=>({name:e.name,status:e.status,path:"/"+e.name,lastUpdate:e.last_update_ts>0?y(e.last_update_ts):"-",nextUpdate:e.next_schedule_ts>0?y(e.next_schedule_ts):"-",size:e.size=="unknown"?"-":e.size})),i=[];for(const e of s){const c=a.findIndex(u=>u.name==e.name);if(c!=-1){a[c]=m(m({},a[c]),e);continue}const l=a.find(u=>e.inherit==u.name);i.push({name:e.name,status:e.status||(l==null?void 0:l.status)||"unknown",path:e.path,route:e.route,lastUpdate:e.lastUpdate||(l==null?void 0:l.lastUpdate)||"-",nextUpdate:e.nextUpdate||(l==null?void 0:l.nextUpdate)||"-",size:e.size||"-"})}return[...a,...i]}var K=_({setup(o){const s=F(),a=I(),i=A(),e=x([]);function c({data:t}){const r=i.state.docItems.find(p=>p.name==t.name);return n(U,null,[n(N,{text:!0,onClick:()=>{t.route?s.push(t.route):window.location.href=t.path||"/"+t.name}},{default:()=>[t.name]}),H(n(N,{text:!0,onClick:()=>s.push("/help/"+(r==null?void 0:r.route)||"")},{default:()=>[n(k,null,{default:()=>[n($,null,null)]})]}),[[R,r!=null]])])}function l({data:t}){let r="info";switch(t.status){case"cache":case"proxy":case"success":r="success";break;case"failed":r="error";break;case"syncing":r="info";break}return n(J,{type:r},{default:()=>[t.status]})}const u=x(""),z=j(()=>i.state.isMobile?[]:[{title:"Size",key:"size",align:"center"},{title:"Last Update",key:"lastUpdate",align:"center"},{title:"Next Update",key:"nextUpdate",align:"center"}]),b=O([{title:"Mirror Name",key:"name",align:"left",render:t=>n(c,{data:t},null),filter:"default",filterOptionValue:u,renderFilterIcon:()=>n(k,null,{default:()=>[n(V,null,null)]}),renderFilterMenu:()=>n(q,{style:"padding: 12px",vertical:!0},{default:()=>[n(D,{placeholder:"Search mirrors...",value:u.value,"onUpdate:value":t=>u.value=t},null)]})},{title:"Status",key:"status",align:"center",render:t=>n(l,{data:t},null)}]),v={pageSlot:7,pageSize:20};return T(()=>G().then(t=>e.value=t.sort((r,p)=>r.name.localeCompare(p.name)),t=>a.error(t.message))),(t,r)=>(g(),E(d(P),{size:"small",columns:d(b).concat(d(z)),data:e.value,pagination:v},null,8,["columns","data"]))}});const Q=Z("Mirrors"),ae=_({setup(o){return(s,a)=>(g(),L(U,null,[n(d(W),{prefix:"bar"},{default:X(()=>[Q]),_:1}),n(K)],64))}});export{ae as default};
